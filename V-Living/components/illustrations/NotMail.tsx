import React, { memo, useEffect, useMemo, useRef } from 'react';
import { SvgXml, Svg, Path } from 'react-native-svg';
import { Animated, Easing, StyleProp, View, ViewStyle, StyleSheet } from 'react-native';

type Props = {
  width?: number;
  height?: number;
  style?: StyleProp<ViewStyle>;
};

// Inline XML from assets/images/screenKhoa/notmail.svg
// Note: We hid the three cloud paths (originally fill="#E9D7FE") to overlay animated versions on top.
const xml = `<?xml version="1.0" encoding="UTF-8"?>
<svg width="275" height="254" viewBox="0 0 275 254" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M266.318 253.999C270.727 253.999 274.324 250.476 274.394 246.08C274.73 224.17 276.5 191.843 235.113 182.906C201.617 175.67 221.48 116.322 131.271 120.155C66.5195 122.907 83.7176 177.327 33.3731 181.856C-0.128624 184.873 -0.42044 227.118 0.867355 246.472C1.14648 250.704 4.67365 253.993 8.93035 253.993H266.318V253.999Z" fill="#DDDDEC"/>
<path opacity="0.55" d="M235.113 182.9C201.617 175.664 221.48 116.316 131.271 120.149C115.868 120.807 105.109 124.387 96.9697 129.517C99.7103 129.156 102.622 128.903 105.724 128.777C195.927 124.944 176.071 184.292 209.566 191.527C250.516 200.37 249.221 232.102 248.86 253.993H266.318C270.727 253.993 274.324 250.47 274.394 246.074C274.73 224.165 276.5 191.844 235.113 182.9Z" fill="#EAEBF2"/>
<path d="M43.3265 239.408C43.3265 239.408 41.8928 238.067 42.8571 232.994C43.8213 227.921 46.2701 223.045 45.0647 217.542C43.8657 212.033 34.4515 198.156 34.4261 197.232C34.3944 196.309 31.5207 213.38 36.3864 220.11C41.2521 226.833 41.8357 229.167 41.62 232.703C41.4043 236.239 41.6708 239.091 42.2037 239.914L43.3265 239.408Z" fill="#D6BBFB"/>
<path d="M42.4317 229.206C41.8671 231.47 41.5245 237.144 42.4253 238.504C42.5078 238.63 42.6283 238.561 42.7806 238.327C42.5078 237.391 42.3238 235.746 42.844 233.001C43.8083 227.928 46.257 223.052 45.0517 217.549C43.8527 212.04 34.4385 198.163 34.4131 197.239C34.4131 197.239 35.8341 208.808 40.6047 216.765C44.0303 222.457 42.9963 226.942 42.4317 229.206Z" fill="#9E77ED"/>
<path d="M45.0399 239.06C45.0399 239.06 42.2739 232.178 46.962 226.22C51.6501 220.262 59.1422 212.609 59.2881 209.579C59.2881 209.579 61.2166 223.969 55.1138 228.042C49.0174 232.115 44.7417 232.767 45.7948 239.035L45.0399 239.06Z" fill="#D6BBFB"/>
<path d="M51.6241 225.151C44.8235 230.084 44.2652 235.771 45.3247 238.408C45.4071 238.611 45.5594 238.737 45.7687 238.807C44.8552 232.76 49.0992 232.07 55.1195 228.048C61.2159 223.974 59.2938 209.585 59.2938 209.585C59.2938 209.585 58.4183 220.211 51.6241 225.151Z" fill="#9E77ED"/>
<path d="M40.4908 239.212C40.4908 239.212 41.3789 235.569 40.9032 231.635C40.4337 227.701 36.3102 225.487 32.4595 221.331C30.4803 219.194 29.8903 207.891 31.121 206.841C31.121 206.841 24.3204 215.057 25.3735 221.072C26.4202 227.087 37.5156 230.996 38.5433 233.906C39.571 236.815 39.4821 239.25 39.4821 239.25L40.4908 239.212Z" fill="#D6BBFB"/>
<path d="M28.8245 210.071C26.5788 216.137 28.8816 223.487 36.3483 228.054C41.842 231.412 40.0911 238.401 40.0911 238.401L40.9919 235.644C41.0744 234.454 41.0807 233.063 40.9095 231.634C40.44 227.699 36.3165 225.486 32.4658 221.33C30.5564 219.268 29.941 208.68 31.0004 206.991C30.6896 207.383 29.8078 208.522 28.8245 210.071Z" fill="#9E77ED"/>
<path d="M31 206.993C31.0762 206.898 31.1207 206.841 31.1207 206.841C31.0826 206.879 31.0381 206.93 31 206.993Z" fill="#9E77ED"/>
<path d="M46.4609 238.756C46.4609 238.756 48.0532 232.861 51.9991 232.064C55.9386 231.273 60.4681 225.461 60.7092 224.322C60.7092 224.329 60.0431 235.277 46.4609 238.756Z" fill="#D6BBFB"/>
<path d="M51.7707 234.019C49.3537 235.221 48.3513 236.84 47.9961 238.314C60.0874 234.437 60.7091 224.329 60.7091 224.329C60.6584 224.557 60.4427 224.968 60.0938 225.48C58.9075 227.555 56.0401 231.894 51.7707 234.019Z" fill="#9E77ED"/>
<path d="M54.9924 236.587H34.375L36.8237 251.938C37.0077 253.102 38.0164 253.962 39.1963 253.962H50.1648C51.3447 253.962 52.3534 253.108 52.5374 251.938L54.9924 236.587Z" fill="#FEC84B"/>
<path d="M54.5864 239.13L54.9924 236.587H34.375L34.781 239.13H54.5864Z" fill="#FDB022"/>
<path d="M49.9932 236.587L47.5445 251.938C47.3605 253.102 46.3518 253.962 45.1719 253.962H50.1645C51.3444 253.962 52.3531 253.108 52.537 251.938L54.9858 236.587H49.9932Z" fill="#FDB022"/>
<path d="M232.474 251.919H202.804L207.34 240.951V240.945L209.167 236.517L209.668 235.303L210.486 233.33L210.651 232.925L212.478 228.497L212.814 227.694L216.05 219.864C216.633 218.453 218.638 218.453 219.222 219.864L222.457 227.694L222.793 228.497L224.62 232.925L224.785 233.33L225.603 235.303L226.105 236.517L227.932 240.945V240.951L232.474 251.919Z" fill="#FEC84B"/>
<path opacity="0.29" d="M204.744 247.219L202.797 251.918H232.473L230.532 247.219H204.744Z" fill="#FDB022"/>
<path d="M234.409 249.11H200.425V253.898H234.409V249.11Z" fill="#B692F6"/>
<path d="M234.408 249.11H227.068V253.898H234.408V249.11Z" fill="#9E77ED"/>
<path opacity="0.29" d="M231.306 249.11H227.107L223.738 240.957V240.951L221.911 236.523L221.41 235.309L220.592 233.335L220.427 232.931L218.6 228.503L218.263 227.7L215.542 221.109L216.05 219.869C216.633 218.459 218.638 218.459 219.221 219.869L222.457 227.7L222.793 228.503L224.62 232.931L224.785 233.335L225.603 235.309L226.104 236.523L227.931 240.951V240.957L231.306 249.11Z" fill="#FDB022"/>
<path d="M224.614 232.93H210.651L212.478 228.503H222.793L224.614 232.93Z" fill="#9E77ED"/>
<path d="M227.932 240.944V240.95H207.34V240.944L209.161 236.517H226.105L227.932 240.944Z" fill="#9E77ED"/>
<path d="M224.614 232.93H220.421L218.594 228.503H222.793L224.614 232.93Z" fill="#FFD700"/>
<path d="M224.614 232.93H220.421L218.594 228.503H222.793L224.614 232.93Z" fill="black" fill-opacity="0.16"/>
<path d="M227.932 240.944V240.95H223.733V240.944L221.912 236.517H226.105L227.932 240.944Z" fill="#FFD700"/>
<path d="M227.932 240.944V240.95H223.733V240.944L221.912 236.517H226.105L227.932 240.944Z" fill="black" fill-opacity="0.16"/>
<path d="M43.3328 144.355C45.5468 144.355 47.4753 142.748 47.7798 140.56C47.8305 140.168 47.8623 139.763 47.8623 139.358C47.8623 134.482 43.8974 130.528 39.0063 130.528C38.8033 130.528 38.6066 130.535 38.41 130.554C38.004 125.747 33.9629 121.971 29.0401 121.971C23.8446 121.971 19.6323 126.171 19.6323 131.351C19.6323 131.578 19.6449 131.806 19.6576 132.034C18.1859 131.212 16.4667 130.775 14.6397 130.857C9.91353 131.072 6.03111 134.842 5.69489 139.548C5.69489 139.586 5.68854 139.624 5.68854 139.662C5.53629 142.217 7.61072 144.368 10.18 144.368H43.3328V144.355Z" fill="transparent"/>
<path d="M254.664 151.287C261.668 151.287 262.055 140.781 255.058 140.439C254.867 140.433 254.677 140.427 254.48 140.427C253.231 140.427 252.032 140.623 250.902 140.983C249.964 135.297 245.015 130.958 239.046 130.958C232.943 130.958 227.912 135.493 227.139 141.363C225.692 140.673 224.068 140.281 222.355 140.281C221.397 140.281 220.471 140.401 219.583 140.629C213.461 142.204 214.743 151.287 221.068 151.287H254.664Z" fill="transparent"/>
<path d="M167.06 72.3194C174.057 72.3194 174.45 61.8135 167.453 61.4783C167.263 61.472 167.072 61.4656 166.876 61.4656C165.626 61.4656 164.427 61.6617 163.298 62.0222C162.359 56.336 157.411 51.9971 151.448 51.9971C145.351 51.9971 140.314 56.5321 139.54 62.4017C138.094 61.7123 136.47 61.3202 134.763 61.3202C133.805 61.3202 132.879 61.4403 131.991 61.668C125.869 63.2366 127.157 72.3194 133.476 72.3194H167.06Z" fill="transparent"/>
<path d="M56.5841 111.339C65.8511 111.339 73.3635 103.849 73.3635 94.6096C73.3635 85.37 65.8511 77.8799 56.5841 77.8799C47.3171 77.8799 39.8047 85.37 39.8047 94.6096C39.8047 103.849 47.3171 111.339 56.5841 111.339Z" fill="#FEC84B"/>
<path d="M56.719 77.8799C61.2802 80.8716 64.2998 86.0202 64.2998 91.8708C64.2998 101.112 56.7887 108.601 47.5204 108.601C47.476 108.601 47.4316 108.601 47.3809 108.594C50.0262 110.327 53.1854 111.339 56.5857 111.339C65.8541 111.339 73.3651 103.85 73.3651 94.6096C73.3651 85.4193 65.9238 77.9558 56.719 77.8799Z" fill="#FDB022"/>
<path d="M147.167 253.615H132.585C130.656 253.615 129.097 252.055 129.097 250.137V172.201H151.823V248.972C151.823 251.539 149.74 253.615 147.167 253.615Z" fill="#FFD700"/>
<path d="M147.167 253.615H132.585C130.656 253.615 129.097 252.055 129.097 250.137V172.201H151.823V248.972C151.823 251.539 149.74 253.615 147.167 253.615Z" fill="black" fill-opacity="0.16"/>
<path d="M148.472 253.615H139.139V172.201H151.823V250.274C151.823 252.118 150.322 253.615 148.472 253.615Z" fill="#9E77ED"/>
<path d="M100.197 97.374H172.884C189.125 97.374 202.296 110.5 202.296 126.699V178.224C202.296 179.41 201.334 180.369 200.145 180.369H72.5244C72.3922 180.369 72.2812 180.263 72.2812 180.126V125.208C72.2812 109.836 84.7806 97.374 100.197 97.374Z" fill="#FFAE00"/>
<g opacity="0.07">
<path d="M109.183 108.704H164.122C180.363 108.704 193.534 121.83 193.534 138.029V178.225C193.534 179.41 192.572 180.369 191.383 180.369H81.5097C81.3776 180.369 81.2666 180.264 81.2666 180.127V136.538C81.2666 121.166 93.766 108.704 109.183 108.704Z" fill="#ECF1F7"/>
</g>
<g opacity="0.65">
<path d="M199.871 180.633H119.584V173.782H202.297V178.214C202.297 179.552 201.213 180.633 199.871 180.633Z" fill="#9E77ED"/>
</g>
<g opacity="0.65">
<path d="M199.871 180.633H119.584V173.782H202.297V178.214C202.297 179.552 201.213 180.633 199.871 180.633Z" fill="#9E77ED"/>
</g>
<path d="M200.463 180.369H163.916V173.982H202.297V178.541C202.297 179.552 201.478 180.369 200.463 180.369Z" fill="#FFD700"/>
<path d="M200.463 180.369H163.916V173.982H202.297V178.541C202.297 179.552 201.478 180.369 200.463 180.369Z" fill="black" fill-opacity="0.16"/>
<g opacity="0.15">
<path d="M202.296 126.884H123.547V173.782H202.296V126.884Z" fill="#FFD700"/>
<path d="M202.296 126.884H123.547V173.782H202.296V126.884Z" fill="black" fill-opacity="0.16"/>
</g>
<path d="M120.376 178.524H75.4523C73.703 178.524 72.2812 177.107 72.2812 175.363V124.512C72.2812 110.395 83.7553 98.9551 97.9142 98.9551C112.073 98.9551 123.547 110.395 123.547 124.512V175.363C123.547 177.107 122.125 178.524 120.376 178.524Z" fill="#9E77ED"/>
<path d="M119.848 178.523H74.9238V125.038C74.9238 112.67 84.9815 102.643 97.3857 102.643C109.79 102.643 119.848 112.67 119.848 125.038V178.523Z" fill="#1F2A37"/>
<path d="M121.65 171.673H84.4374C83.095 171.673 82.001 170.588 82.001 169.244V146.923C82.001 145.247 83.3645 143.893 85.0399 143.893H120.398C122.432 143.893 124.081 145.537 124.081 147.565V169.244C124.087 170.588 122.998 171.673 121.65 171.673Z" fill="#B692F6"/>
<g opacity="0.56">
<path d="M122.173 171.674H103.041H83.9083C82.8513 171.674 81.9951 170.82 81.9951 169.766V146.559C81.9951 146.275 82.1008 145.995 82.2911 145.779C82.5131 145.526 82.8936 145.495 83.1526 145.711L97.7819 157.778L100.805 160.276C102.1 161.34 103.971 161.33 105.255 160.249L123.214 145.047C124.34 146.111 124.086 147.181 124.086 147.181V169.761C124.086 170.82 123.23 171.674 122.173 171.674Z" fill="#FFD700"/>
<path d="M122.173 171.674H103.041H83.9083C82.8513 171.674 81.9951 170.82 81.9951 169.766V146.559C81.9951 146.275 82.1008 145.995 82.2911 145.779C82.5131 145.526 82.8936 145.495 83.1526 145.711L97.7819 157.778L100.805 160.276C102.1 161.34 103.971 161.33 105.255 160.249L123.214 145.047C124.34 146.111 124.086 147.181 124.086 147.181V169.761C124.086 170.82 123.23 171.674 122.173 171.674Z" fill="black" fill-opacity="0.16"/>
</g>
<path d="M82.8725 171.91C82.7246 171.91 82.5819 171.852 82.4762 171.736C82.2806 171.52 82.3018 171.188 82.5184 170.993L98.2946 156.997C98.5113 156.802 98.8443 156.823 99.0398 157.039C99.2354 157.255 99.2142 157.587 98.9975 157.782L83.2214 171.778C83.121 171.868 82.9941 171.91 82.8725 171.91Z" fill="#B692F6"/>
<path d="M122.632 171.91C122.505 171.91 122.384 171.868 122.283 171.778L106.951 158.23C106.734 158.036 106.713 157.704 106.903 157.487C107.099 157.271 107.432 157.25 107.649 157.44L122.981 170.993C123.197 171.188 123.219 171.52 123.023 171.736C122.923 171.852 122.78 171.91 122.632 171.91Z" fill="#B692F6"/>
<path d="M120.112 178.523H78.3594V175.952C78.3594 173.591 80.2779 171.673 82.6509 171.673H120.112V178.523Z" fill="#FDA29B"/>
<path d="M118.574 188.01H43.0755C40.2321 188.01 37.9277 185.712 37.9277 182.877V178.524H124.604V181.997C124.604 185.317 121.903 188.01 118.574 188.01Z" fill="#B692F6"/>
<path d="M118.574 188.01H94.8704C92.027 188.01 89.7227 185.712 89.7227 182.877V178.524H124.605V181.997C124.605 185.317 121.904 188.01 118.574 188.01Z" fill="#9E77ED"/>
<path d="M144.159 135.842C148.245 135.842 151.558 132.539 151.558 128.464C151.558 124.39 148.245 121.087 144.159 121.087C140.073 121.087 136.76 124.39 136.76 128.464C136.76 132.539 140.073 135.842 144.159 135.842Z" fill="#FFD700"/>
<path d="M144.159 135.842C148.245 135.842 151.558 132.539 151.558 128.464C151.558 124.39 148.245 121.087 144.159 121.087C140.073 121.087 136.76 124.39 136.76 128.464C136.76 132.539 140.073 135.842 144.159 135.842Z" fill="black" fill-opacity="0.16"/>
<path d="M144.16 130.835C142.844 130.835 141.781 129.776 141.781 128.464V81.5656C141.781 80.2535 142.844 79.1943 144.16 79.1943C145.476 79.1943 146.538 80.2535 146.538 81.5656V128.464C146.538 129.776 145.476 130.835 144.16 130.835Z" fill="#FFD700"/>
<path d="M144.16 130.835C142.844 130.835 141.781 129.776 141.781 128.464V81.5656C141.781 80.2535 142.844 79.1943 144.16 79.1943C145.476 79.1943 146.538 80.2535 146.538 81.5656V128.464C146.538 129.776 145.476 130.835 144.16 130.835Z" fill="black" fill-opacity="0.16"/>
<path d="M145.217 134.787C148.72 134.787 151.559 131.956 151.559 128.464C151.559 124.972 148.72 122.141 145.217 122.141C141.714 122.141 138.875 124.972 138.875 128.464C138.875 131.956 141.714 134.787 145.217 134.787Z" fill="#9E77ED"/>
<path d="M147.33 92.9739V81.5654H169.015L147.33 92.9739Z" fill="#B692F6"/>
<path d="M147.33 92.9739V81.5654H169.015L147.33 92.9739Z" fill="#B692F6"/>
<path d="M145.216 130.835C143.9 130.835 142.838 129.776 142.838 128.464V81.5656C142.838 80.2535 143.9 79.1943 145.216 79.1943C146.532 79.1943 147.595 80.2535 147.595 81.5656V128.464C147.595 129.776 146.532 130.835 145.216 130.835Z" fill="#9E77ED"/>
<path d="M145.216 132.152C143.102 132.152 141.385 130.44 141.385 128.332C141.385 126.224 143.102 124.512 145.216 124.512C147.331 124.512 149.048 126.224 149.048 128.332C149.048 130.44 147.331 132.152 145.216 132.152ZM145.216 125.039C143.393 125.039 141.913 126.514 141.913 128.332C141.913 130.15 143.393 131.626 145.216 131.626C147.04 131.626 148.52 130.15 148.52 128.332C148.52 126.514 147.04 125.039 145.216 125.039Z" fill="#FFD700"/>
<path d="M145.216 132.152C143.102 132.152 141.385 130.44 141.385 128.332C141.385 126.224 143.102 124.512 145.216 124.512C147.331 124.512 149.048 126.224 149.048 128.332C149.048 130.44 147.331 132.152 145.216 132.152ZM145.216 125.039C143.393 125.039 141.913 126.514 141.913 128.332C141.913 130.15 143.393 131.626 145.216 131.626C147.04 131.626 148.52 130.15 148.52 128.332C148.52 126.514 147.04 125.039 145.216 125.039Z" fill="black" fill-opacity="0.16"/>
<path d="M229.596 204.358H177.052C176.397 204.358 175.867 203.828 175.867 203.173V187.905C175.867 187.25 176.397 186.721 177.052 186.721H229.596C230.251 186.721 230.781 187.25 230.781 187.905V203.173C230.788 203.828 230.251 204.358 229.596 204.358Z" fill="#FFD700"/>
<path d="M229.596 204.358H177.052C176.397 204.358 175.867 203.828 175.867 203.173V187.905C175.867 187.25 176.397 186.721 177.052 186.721H229.596C230.251 186.721 230.781 187.25 230.781 187.905V203.173C230.788 203.828 230.251 204.358 229.596 204.358Z" fill="black" fill-opacity="0.16"/>
<path d="M187.921 198.023C189.48 196.463 189.48 193.933 187.921 192.373C186.361 190.813 183.832 190.813 182.272 192.373C180.712 193.933 180.712 196.463 182.272 198.023C183.832 199.584 186.361 199.584 187.921 198.023Z" fill="white"/>
<path d="M184.76 197.177C184.753 197.177 184.753 197.177 184.745 197.177C184.62 197.177 184.495 197.118 184.414 197.023L182.649 195.029C182.48 194.837 182.494 194.543 182.685 194.374C182.877 194.205 183.171 194.219 183.34 194.411L184.775 196.037L188.328 192.468C188.512 192.284 188.806 192.284 188.982 192.468C189.166 192.652 189.166 192.946 188.982 193.123L185.084 197.045C184.995 197.126 184.878 197.177 184.76 197.177Z" fill="#FDB022"/>
<path d="M223.168 192.853H195.067C194.942 192.853 194.832 192.749 194.832 192.616C194.832 192.491 194.935 192.38 195.067 192.38H223.168C223.293 192.38 223.403 192.483 223.403 192.616C223.396 192.749 223.293 192.853 223.168 192.853Z" fill="white"/>
<path d="M207.624 196.193H195.067C194.942 196.193 194.832 196.089 194.832 195.956C194.832 195.823 194.935 195.72 195.067 195.72H207.624C207.749 195.72 207.86 195.823 207.86 195.956C207.86 196.089 207.749 196.193 207.624 196.193Z" fill="white"/>
<path d="M207.624 199.982H195.067C194.942 199.982 194.832 199.878 194.832 199.745C194.832 199.62 194.935 199.509 195.067 199.509H207.624C207.749 199.509 207.86 199.612 207.86 199.745C207.852 199.878 207.749 199.982 207.624 199.982Z" fill="white"/>
<path d="M223.167 196.193H210.61C210.485 196.193 210.375 196.089 210.375 195.956C210.375 195.823 210.478 195.72 210.61 195.72H223.167C223.292 195.72 223.403 195.823 223.403 195.956C223.403 196.089 223.292 196.193 223.167 196.193Z" fill="white"/>
<path d="M215.369 219.877H162.817C162.162 219.877 161.633 219.347 161.633 218.692V203.424C161.633 202.769 162.162 202.239 162.817 202.239H215.362C216.017 202.239 216.546 202.769 216.546 203.424V218.692C216.554 219.339 216.024 219.877 215.369 219.877Z" fill="white"/>
<path d="M170.865 214.712C173.072 214.712 174.86 212.923 174.86 210.716C174.86 208.51 173.072 206.721 170.865 206.721C168.659 206.721 166.871 208.51 166.871 210.716C166.871 212.923 168.659 214.712 170.865 214.712Z" fill="#FDB022"/>
<path opacity="0.69" d="M208.933 208.371H180.833C180.708 208.371 180.598 208.268 180.598 208.135C180.598 208.009 180.701 207.898 180.833 207.898H208.933C209.058 207.898 209.169 208.002 209.169 208.135C209.169 208.268 209.066 208.371 208.933 208.371Z" fill="#FDB022"/>
<path opacity="0.69" d="M193.39 211.703H180.833C180.708 211.703 180.598 211.6 180.598 211.467C180.598 211.341 180.701 211.23 180.833 211.23H193.39C193.515 211.23 193.625 211.334 193.625 211.467C193.625 211.6 193.515 211.703 193.39 211.703Z" fill="#FDB022"/>
<path opacity="0.69" d="M193.39 215.5H180.833C180.708 215.5 180.598 215.397 180.598 215.264C180.598 215.138 180.701 215.027 180.833 215.027H193.39C193.515 215.027 193.625 215.131 193.625 215.264C193.625 215.397 193.515 215.5 193.39 215.5Z" fill="#FDB022"/>
<path opacity="0.69" d="M208.933 211.703H196.376C196.251 211.703 196.141 211.6 196.141 211.467C196.141 211.341 196.244 211.23 196.376 211.23H208.933C209.058 211.23 209.168 211.334 209.168 211.467C209.168 211.6 209.065 211.703 208.933 211.703Z" fill="#FDB022"/>
<path d="M210.89 134.612C218.594 134.612 224.84 128.385 224.84 120.704C224.84 113.022 218.594 106.795 210.89 106.795C203.185 106.795 196.939 113.022 196.939 120.704C196.939 128.385 203.185 134.612 210.89 134.612Z" fill="#FFAE00"/>
<path d="M214.093 105.886C216.744 93.6379 208.935 81.5655 196.651 78.9216C184.366 76.2777 172.258 84.0636 169.606 96.3119C166.954 108.56 174.763 120.633 187.048 123.276C199.333 125.92 211.441 118.134 214.093 105.886Z" fill="#FDA29B"/>
<path d="M191.84 116.162C189.277 116.162 187.12 114.252 186.828 111.716L186.79 111.361H196.896L196.858 111.716C196.553 114.252 194.403 116.162 191.84 116.162ZM187.513 111.994C187.919 114.03 189.721 115.53 191.84 115.53C193.959 115.53 195.76 114.03 196.166 111.994H187.513Z" fill="white"/>
<path d="M201.179 106.731H182.496V98.2176C182.496 93.2967 186.512 89.293 191.447 89.293H192.228C197.163 89.293 201.179 93.2967 201.179 98.2176V106.731ZM183.13 106.099H200.544V98.2176C200.544 93.6446 196.814 89.9255 192.228 89.9255H191.447C186.861 89.9255 183.13 93.6446 183.13 98.2176V106.099Z" fill="white"/>
<path d="M200.867 111.995H182.813C181.246 111.995 179.971 110.723 179.971 109.161V108.933C179.971 107.371 181.246 106.1 182.813 106.1H200.867C202.434 106.1 203.709 107.371 203.709 108.933V109.161C203.709 110.723 202.434 111.995 200.867 111.995ZM182.813 106.732C181.588 106.732 180.599 107.719 180.599 108.933V109.161C180.599 110.375 181.588 111.362 182.806 111.362H200.861C202.079 111.362 203.069 110.375 203.069 109.161V108.933C203.069 107.719 202.079 106.732 200.861 106.732H182.813Z" fill="white"/>
<path d="M189.925 104.032H182.813C182.636 104.032 182.496 103.892 182.496 103.715C182.496 103.537 182.636 103.397 182.813 103.397H189.925C190.102 103.397 190.242 103.537 190.242 103.715C190.242 103.892 190.102 104.032 189.925 104.032Z" fill="white"/>
<path d="M190.99 104.033C190.908 104.033 190.825 104.001 190.762 103.944C190.736 103.912 190.711 103.88 190.698 103.842C190.679 103.798 190.673 103.76 190.673 103.722C190.673 103.677 190.679 103.633 190.698 103.595C190.711 103.557 190.736 103.525 190.762 103.494C190.794 103.468 190.832 103.443 190.87 103.424C190.984 103.379 191.124 103.405 191.213 103.494C191.245 103.525 191.27 103.557 191.283 103.595C191.302 103.633 191.308 103.677 191.308 103.722C191.308 103.76 191.302 103.798 191.283 103.842C191.27 103.88 191.245 103.912 191.213 103.944C191.187 103.969 191.149 103.995 191.111 104.014C191.073 104.026 191.029 104.033 190.99 104.033Z" fill="white"/>
<path d="M191.941 87.572C191.763 87.572 191.623 87.4328 191.623 87.2557V82.6131C191.623 82.436 191.763 82.2969 191.941 82.2969C192.119 82.2969 192.258 82.436 192.258 82.6131V87.2557C192.258 87.4328 192.112 87.572 191.941 87.572Z" fill="white"/>
<path d="M198.137 88.9136C198.074 88.9136 198.017 88.8946 197.96 88.8567C197.814 88.7618 197.776 88.5594 197.877 88.4203L199.184 86.4974C199.286 86.352 199.476 86.314 199.628 86.4152C199.774 86.5101 199.812 86.7125 199.711 86.8516L198.404 88.7745C198.334 88.8693 198.233 88.9136 198.137 88.9136Z" fill="white"/>
<path d="M185.539 88.9136C185.438 88.9136 185.336 88.863 185.279 88.7745L183.972 86.8516C183.877 86.7062 183.909 86.5101 184.055 86.4152C184.201 86.314 184.397 86.352 184.499 86.4974L185.806 88.4203C185.901 88.5657 185.869 88.7618 185.723 88.8567C185.666 88.8946 185.603 88.9136 185.539 88.9136Z" fill="white"/>
<path d="M97.3579 21.1017C98.6232 19.9706 99.725 18.5568 100.663 16.8601C101.601 15.1417 102.07 13.4995 102.07 11.9333C102.07 10.3672 101.874 9.15994 101.481 8.31162C101.088 7.46329 100.543 7.03913 99.8449 7.03913C99.1468 7.03913 98.2305 7.66993 97.0961 8.93155C95.9834 10.1714 94.969 11.8028 94.0527 13.8257C93.1582 15.8487 92.7109 17.7846 92.7109 19.6335C92.7109 20.5688 92.8418 21.3301 93.1036 21.9174C93.3654 22.483 93.6927 22.7658 94.0854 22.7658C95.0017 22.7658 96.0925 22.2111 97.3579 21.1017ZM94.1181 26.7137C92.5037 26.7137 91.0638 25.9307 89.7984 24.3645C88.5331 22.7766 87.9004 21.1996 87.9004 19.6335C87.9004 17.6323 88.2822 15.5876 89.0458 13.4995C89.8093 11.3895 90.7584 9.57323 91.8928 8.05059C93.0491 6.50621 94.3145 5.2446 95.6889 4.26576C97.0633 3.26517 98.3287 2.76488 99.485 2.76488C101.601 2.76488 103.336 3.66758 104.688 5.47299C106.041 7.25665 106.717 9.2687 106.717 11.5091C106.717 13.7496 106.15 16.0227 105.015 18.3284C103.881 20.6123 102.31 22.5809 100.303 24.234C98.3178 25.8872 96.2561 26.7137 94.1181 26.7137Z" fill="#1F2A37"/>
<path d="M119.812 9.94301C120.619 9.94301 121.481 10.6608 122.397 12.0965C123.335 13.5321 123.804 14.9677 123.804 16.4033C123.804 17.2734 123.433 18.3066 122.691 19.503C121.95 20.6993 121.012 21.8304 119.877 22.8963C118.764 23.9404 117.466 24.8322 115.983 25.5718C114.521 26.3113 113.125 26.6811 111.794 26.6811H111.401C110.027 32.3801 109.056 35.2296 108.489 35.2296C108.031 35.2296 107.551 34.849 107.049 34.0876C106.525 33.3263 106.264 32.6955 106.264 32.1952C106.264 31.6949 106.58 30.1614 107.213 27.5947C109.089 19.9815 110.027 14.239 110.027 10.3672C110.027 9.71462 110.343 9.38834 110.976 9.38834C111.5 9.38834 112.165 9.68199 112.972 10.2693C113.779 10.8566 114.281 11.6179 114.478 12.5532C116.332 10.8131 118.11 9.94301 119.812 9.94301ZM112.416 22.7984C114.118 22.4721 115.721 21.5368 117.226 19.9924C118.754 18.448 119.517 17.1103 119.517 15.9792C119.517 14.8481 119.201 14.2825 118.568 14.2825C117.652 14.2825 116.681 14.8046 115.656 15.8487C115.241 16.2837 114.783 16.9254 114.281 17.7737C113.779 18.622 113.343 19.6117 112.972 20.7428L112.416 22.7984Z" fill="#1F2A37"/>
<path d="M137.42 9.94301C138.228 9.94301 139.089 10.6608 140.006 12.0965C140.944 13.5321 141.413 14.9677 141.413 16.4033C141.413 17.2734 141.042 18.3066 140.3 19.503C139.558 20.6993 138.62 21.8304 137.486 22.8963C136.373 23.9404 135.075 24.8322 133.592 25.5718C132.13 26.3113 130.734 26.6811 129.403 26.6811H129.01C127.636 32.3801 126.665 35.2296 126.098 35.2296C125.64 35.2296 125.16 34.849 124.658 34.0876C124.134 33.3263 123.872 32.6955 123.872 32.1952C123.872 31.6949 124.189 30.1614 124.821 27.5947C126.698 19.9815 127.636 14.239 127.636 10.3672C127.636 9.71462 127.952 9.38834 128.585 9.38834C129.108 9.38834 129.774 9.68199 130.581 10.2693C131.388 10.8566 131.89 11.6179 132.086 12.5532C133.941 10.8131 135.719 9.94301 137.42 9.94301ZM130.025 22.7984C131.726 22.4721 133.33 21.5368 134.835 19.9924C136.362 18.448 137.126 17.1103 137.126 15.9792C137.126 14.8481 136.81 14.2825 136.177 14.2825C135.261 14.2825 134.29 14.8046 133.264 15.8487C132.85 16.2837 132.392 16.9254 131.89 17.7737C131.388 18.622 130.952 19.6117 130.581 20.7428L130.025 22.7984Z" fill="#1F2A37"/>
<path d="M153.589 9.94301C154.418 9.94301 155.236 10.4324 156.044 11.4113C156.851 12.3901 157.255 13.2711 157.255 14.0541C157.255 14.5762 157.025 14.8372 156.567 14.8372C156.305 14.8372 155.924 14.7393 155.422 14.5435C154.92 14.326 154.407 14.2173 153.884 14.2173C153.382 14.2173 152.629 14.3913 151.626 14.7393C150.644 15.0873 150.153 15.5441 150.153 16.1097C150.153 16.3272 150.448 16.6426 151.037 17.0559C151.626 17.4692 152.269 17.8933 152.968 18.3284C153.666 18.7634 154.309 19.3725 154.898 20.1555C155.487 20.9169 155.782 21.7543 155.782 22.6679C155.782 23.5597 155.116 24.4624 153.786 25.376C152.477 26.2896 150.928 26.7464 149.139 26.7464C147.372 26.7464 145.855 26.344 144.59 25.5391C143.325 24.7343 142.692 23.9077 142.692 23.0594C142.692 22.2111 143.041 21.7869 143.739 21.7869C144.023 21.7869 144.361 21.8957 144.754 22.1132C145.844 22.744 147.197 23.0594 148.812 23.0594C150.448 23.0594 151.266 22.8419 151.266 22.4069C151.266 21.9718 150.95 21.4933 150.317 20.9712C149.706 20.4274 149.03 19.9271 148.288 19.4704C147.568 19.0136 146.892 18.4589 146.259 17.8063C145.648 17.132 145.343 16.4795 145.343 15.8487C145.343 14.6741 146.412 13.4016 148.55 12.0312C150.688 10.6391 152.368 9.94301 153.589 9.94301Z" fill="#1F2A37"/>
<path d="M161.077 23.8425C161.077 23.2552 161.328 22.6788 161.829 22.1132C162.331 21.5259 162.833 21.2323 163.335 21.2323C163.836 21.2323 164.415 21.8196 165.069 22.9942C165.745 24.1688 166.084 25.0497 166.084 25.637C166.084 25.9198 165.898 26.2352 165.527 26.5832C165.178 26.9313 164.829 27.1053 164.48 27.1053C163.826 27.1053 163.095 26.7029 162.287 25.898C161.48 25.0932 161.077 24.408 161.077 23.8425ZM164.447 1.23136C164.447 0.600559 164.785 0.285156 165.462 0.285156C166.138 0.285156 167.033 0.763698 168.145 1.72078C169.28 2.67787 169.847 3.37393 169.847 3.80897C169.847 5.24459 169.334 8.21373 168.309 12.7164C167.305 17.1973 166.433 19.4377 165.691 19.4377C165.102 19.4377 164.524 19.1332 163.956 18.5241C163.389 17.9151 163.095 17.2843 163.073 16.6317C163.029 16.3925 163.117 15.6964 163.335 14.5435C163.553 13.3689 163.793 11.5744 164.055 9.15994C164.316 6.72373 164.447 4.08087 164.447 1.23136Z" fill="#1F2A37"/>
<path d="M176.704 23.8425C176.704 23.2552 176.955 22.6788 177.457 22.1132C177.958 21.5259 178.46 21.2323 178.962 21.2323C179.464 21.2323 180.042 21.8196 180.696 22.9942C181.373 24.1688 181.711 25.0497 181.711 25.637C181.711 25.9198 181.525 26.2352 181.155 26.5832C180.806 26.9313 180.456 27.1053 180.107 27.1053C179.453 27.1053 178.722 26.7029 177.915 25.898C177.108 25.0932 176.704 24.408 176.704 23.8425ZM180.075 1.23136C180.075 0.600559 180.413 0.285156 181.089 0.285156C181.765 0.285156 182.66 0.763698 183.773 1.72078C184.907 2.67787 185.474 3.37393 185.474 3.80897C185.474 5.24459 184.962 8.21373 183.936 12.7164C182.933 17.1973 182.06 19.4377 181.318 19.4377C180.729 19.4377 180.151 19.1332 179.584 18.5241C179.017 17.9151 178.722 17.2843 178.7 16.6317C178.657 16.3925 178.744 15.6964 178.962 14.5435C179.18 13.3689 179.42 11.5744 179.682 9.15994C179.944 6.72373 180.075 4.08087 180.075 1.23136Z" fill="#1F2A37"/>
</svg>`;

// Cloud path data (three clouds originally filled with #E9D7FE)
const CLOUDS = [
  // Cloud near bottom-left
  "M43.3328 144.355C45.5468 144.355 47.4753 142.748 47.7798 140.56C47.8305 140.168 47.8623 139.763 47.8623 139.358C47.8623 134.482 43.8974 130.528 39.0063 130.528C38.8033 130.528 38.6066 130.535 38.41 130.554C38.004 125.747 33.9629 121.971 29.0401 121.971C23.8446 121.971 19.6323 126.171 19.6323 131.351C19.6323 131.578 19.6449 131.806 19.6576 132.034C18.1859 131.212 16.4667 130.775 14.6397 130.857C9.91353 131.072 6.03111 134.842 5.69489 139.548C5.69489 139.586 5.68854 139.624 5.68854 139.662C5.53629 142.217 7.61072 144.368 10.18 144.368H43.3328V144.355Z",
  // Cloud near right middle
  "M254.664 151.287C261.668 151.287 262.055 140.781 255.058 140.439C254.867 140.433 254.677 140.427 254.48 140.427C253.231 140.427 252.032 140.623 250.902 140.983C249.964 135.297 245.015 130.958 239.046 130.958C232.943 130.958 227.912 135.493 227.139 141.363C225.692 140.673 224.068 140.281 222.355 140.281C221.397 140.281 220.471 140.401 219.583 140.629C213.461 142.204 214.743 151.287 221.068 151.287H254.664Z",
  // Cloud near top middle
  "M167.06 72.3194C174.057 72.3194 174.45 61.8135 167.453 61.4783C167.263 61.472 167.072 61.4656 166.876 61.4656C165.626 61.4656 164.427 61.6617 163.298 62.0222C162.359 56.336 157.411 51.9971 151.448 51.9971C145.351 51.9971 140.314 56.5321 139.54 62.4017C138.094 61.7123 136.47 61.3202 134.763 61.3202C133.805 61.3202 132.879 61.4403 131.991 61.668C125.869 63.2366 127.157 72.3194 133.476 72.3194H167.06Z",
];

function NotMail({ width = 260, height = 240, style }: Props) {
  // Progress values 0 -> 1, continuously looping
  const p1 = useRef(new Animated.Value(0)).current;
  const p2 = useRef(new Animated.Value(0)).current;
  const p3 = useRef(new Animated.Value(0)).current;

  useEffect(() => {
    const startLoop = (val: Animated.Value, duration: number, delay: number = 0) => {
      val.setValue(0);
      const seq = Animated.sequence([
        Animated.delay(delay),
        Animated.timing(val, {
          toValue: 1,
          duration,
          easing: Easing.linear,
          useNativeDriver: true,
        }),
        // instant reset to 0 so the next loop starts from the right again
        Animated.timing(val, {
          toValue: 0,
          duration: 0,
          easing: Easing.linear,
          useNativeDriver: true,
        }),
      ]);
      Animated.loop(seq).start();
    };

    startLoop(p1, 20000, 100);   // slowest
    startLoop(p2, 10000, 600);  // medium, slight offset
    startLoop(p3, 30000, 300);  // fastest
  }, [p1, p2, p3]);

  const CloudLayer = useMemo(() => {
    const margin = 80; // extra offscreen margin for smooth wrap
    const startX = width + margin;      // start off-screen right
    const endX = -width - margin;       // end off-screen left
    const progress = [p1, p2, p3];
    return CLOUDS.map((d, idx) => {
      const translateX = progress[idx].interpolate({ inputRange: [0, 1], outputRange: [startX, endX] });
      return (
        <Animated.View
          key={idx}
          pointerEvents="none"
          style={[StyleSheet.absoluteFillObject, { transform: [{ translateX }] }]}
        >
          <Svg width="100%" height="100%" viewBox="0 0 275 254">
            <Path d={d} fill="#E9D7FE" />
          </Svg>
        </Animated.View>
      );
    });
  }, [width, p1, p2, p3]);

  return (
    <View style={[{ width, height }, style]}>
      <SvgXml xml={xml} width="100%" height="100%" />
      {CloudLayer}
    </View>
  );
}

export default memo(NotMail);
